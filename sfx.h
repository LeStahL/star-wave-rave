/* File generated with Shader Minifier 1.1.5
 * http://www.ctrl-alt-test.fr
 */
#ifndef SFX_H_
# define SFX_H_

const char *sfx_frag =
 "#version 130\n"
 "uniform float iBlockOffset,iSampleRate,iVolume;\n"
 "#define DEBUG_ONLY_DRUMS false\n"
 "#define DEBUG_ONLY_MELO false\n"
 "#define DEBUG_ONLY_TRACK-1\n"
 "#define PI radians(180.)\n"
 "float f(float f)"
 "{"
   "return sin(2.*PI*mod(f,1.));"
 "}"
 "float f(float s,float i)"
 "{"
   "return.5*f(s)+.5*f((1.+i)*s);"
 "}"
 "float p(float f)"
 "{"
   "return sign(2.*fract(f)-1.);"
 "}"
 "float p(float f,float i)"
 "{"
   "return sign(2.*fract(f)-1.+i);"
 "}"
 "float t(float f)"
 "{"
   "return 4.*abs(fract(f)-.5)-1.;"
 "}"
 "float s(float f)"
 "{"
   "return 2.*fract(f)-1.;"
 "}"
 "float f(float f,float i,float s)"
 "{"
   "return floor(i*f+.5)*s;"
 "}"
 "float s(float f,float i)"
 "{"
   "return floor(i*f+.5)/i;"
 "}"
 "float i(float f)"
 "{"
   "return clamp(f,-1.,1.);"
 "}"
 "float e(float f)"
 "{"
   "return smoothstep(0.,.01,f);"
 "}"
 "float w(int f)"
 "{"
   "return 27.5*pow(2.,float(f+3)/12.);"
 "}"
 "float r(int f)"
 "{"
   "return 1.-2.*float(f%2);"
 "}"
 "const float k=77.5,I=k/60.,c=60./k;"
 "float e(float f,float i,float c,float s)"
 "{"
   "return smoothstep(-1e-05,i,f)-(1.-s)*smoothstep(0.,c,f-i);"
 "}"
 "float e(float s,float c,int i,float D,float e,float w,float p,float P)"
 "{"
   "float r=0.;"
   "for(int v=0;v<=i;v++)"
     "{"
       "float I=2.*float(v)+1.,t=1./I,k=(v%2==1?-1.:1.)*t*t,a=t,m=pow(1.+pow(float(v)*e,2.*w),-.5)+p*exp(-pow(float(v)*e*P,2.));"
       "r+=(D*k+(1.-D)*a)*m*f(I*c*s);"
     "}"
   "return r;"
 "}"
 "float e(float i,float c,float s,int w,float D,float t,float r,float P,float v)"
 "{"
   "return e(f(i,s,1./s),c,w,D,t,r,P,v);"
 "}"
 "float e(float f,float i,float s,float c,float e,float D)"
 "{"
   "float r=pow(f/s,8.),v=e+(1.-e)*exp(-(f-s)/c),w=f<i-D?1.:pow((i-f)/D,4.);"
   "return(f<s?r:v)*w;"
 "}"
 "float f(float s,float i,float c,float D,float v,float t,float p,float P)"
 "{"
   "float r=0.,w=1./c,e=1./P,I=i*s;"
   "for(int a=1;a<=200;a++)"
     "{"
       "float m=2./PI*(1.-2.*float(a%2))/float(a),k=pow(1.+pow(float(a)*i*w,D),-.5)+p*exp(-pow((float(a)*i-c)*e,2.));"
       "if(abs(k*m)<.0001)"
         "break;"
       "if(v>0.||t>0.)"
         "r+=.33*(f(float(a)*I)+f(float(a)*I*(1.+v))+f(float(a)*I*(1.+t)));"
       "else"
         " r+=k*m*f(float(a)*I);"
     "}"
   "return r;"
 "}"
 "float f(float s,float i,float c,float D,float v,float t,float p,float r,float a)"
 "{"
   "float e=0.,w=1./c,I=1./r,m=i*s;"
   "for(int P=1;P<=200;P++)"
     "{"
       "float k=1./float(P)*(1.+(2.*float(P%2)-1.)*f(a)),n=pow(1.+pow(float(P)*i*w,D),-.5)+p*exp(-pow((float(P)*i-c)*I,2.)),g=k*n;"
       "if(abs(g)<1e-06)"
         "break;"
       "if(v>0.||t>0.)"
         "e+=g*.33*(f(float(P)*m)+f(float(P)*m*(1.+v))+f(float(P)*m*(1.+t)));"
       "else"
         " e+=g*f(float(P)*m);"
     "}"
   "return 2.*e-1.;"
 "}"
 "float i(float s,float i,float c,float D,float P,float t,float p,float e,float a)"
 "{"
   "float w=0.,I=1./c,m=1./e,v=i*s;"
   "for(int k=1;k<=200;k++)"
     "{"
       "float n=1./(2.*PI*float(k))*(r(k)*f(a*float(k)+.25)-1.),g=pow(1.+pow(float(k)*i*I,D),-.5)+p*exp(-pow((float(k)*i-c)*m,2.)),y=g*n;"
       "if(abs(y)<1e-06)"
         "break;"
       "if(P>0.||t>0.)"
         "w+=y*.33*(f(float(k)*v)+f(float(k)*v*(1.+P))+f(float(k)*v*(1.+t)));"
       "else"
         " w+=y*f(float(k)*v);"
     "}"
   "return 2.*w-1.;"
 "}"
 "float f(float i,float c,int s,int P)"
 "{"
   "i=i-min(i,c);"
   "float w=80.,I=100.,p=.01*e(i,.8,.4,.5),m=0.,r=e(i,.2,1.,0.),k=f(i*w*(1.+p*f(i*I*(1.+m*f(i*I)))));"
   "return r*k;"
 "}"
 "float i(float f,float i,int s,int P)"
 "{"
   "f=f-min(f,i);"
   "float k=6000.,a=800.,v=350.,c=.01,w=.01,m=.1,I=t(f*(v+(k-a)*smoothstep(-c,0.,-f)+(a-v)*smoothstep(-c-w,-c,-f)))*smoothstep(-m,-c-w,-f),p=fract(sin(f*90.)*45000.)*e(f,.05,.3,.3),D=2.;"
   "return float(s)/100.*clamp(D*I+p,-1.,1.)*e(f,0.,.25,.3);"
 "}"
 "float p(float f,float i,int s,int P)"
 "{"
   "f=f-min(f,i);"
   "float w=fract(sin(f*90.)*45000.);"
   "w=1./(1.+w);"
   "return float(s)/100.*w*e(f,0.,.12,0.);"
 "}"
 "float r(float f,float i,int s,int P)"
 "{"
   "return f=f-min(f,i),float(s)/100.*.5*fract(sin(f*90.)*45000.)*e(f,.03,.15,.15);"
 "}"
 "float n(float f)"
 "{"
   "float i=floor(f*(1500.*exp(-f*.1)));"
   "vec2 s=fract(vec2(i*5.3983,i*5.4427));"
   "s+=dot(s.yx,s.xy+vec2(21.5351,14.3137));"
   "return fract(s.x*s.y*3.4337)*.5*smoothstep(-.3,0.,-f);"
 "}"
 "float n(float i,float c,int P,int v)"
 "{"
   "i=i-min(i,c);"
   "float w=50.+150.*smoothstep(-.12,0.,-i),I=smoothstep(0.,.015,i)*smoothstep(-.08,0.,.16-i),k=I*e(i,w,3,1.,.8,8.,4.,1.),a=.4*step(i,.03)*f(i*1100.*s(i*800.)),p=(1.-exp(-1000.*i))*exp(-40.*i)*f((400.-200.*i)*i*f(w*i));"
   "return float(P)/100.*(k+p+a);"
 "}"
 "float f(float P,float D,float v,float k,int a,int r)"
 "{"
   "if(a>100)"
     "a=a%100;"
   "float m=D-v,I=m/(k-v),g=c*(D-v),y=w(a),n=e(D-v)*e(k-D),b=clamp(1.1*f(w(a)*P),-.999,.999);"
   "if(r==-1)"
     "return 0.;"
   "if(r==0)"
     "return n*b;"
   "if(r==80)"
     "n*=.3,b=f(P,y,3000.,.1,0.,0.,0.,0.),b=s(P*y);"
   "if(r==14)"
     "{"
       "n*=e(m,k-v,.1,1.,1.,.5);"
       "float x=600.*e(m,k-v,2.,0.,1.,2.)+40.*sqrt(y);"
       "b+=.3*i(P,y,x,30.,.002,-.01,0.,0.,.1);"
       "b=i(.8*b);"
     "}"
   "if(r==15)"
     "{"
       "n*=e(m,k-v,.5,0.,.2,0.);"
       "n*=.5;"
       "float x=100.*e(m,k-v,2.,0.,1.,0.)+20.*sqrt(y);"
       "b=.2*f(P,y,x,50.,-.01-.005*f(.5*I),.01-.008*f(.25*I+.25),0.,0.);"
       "b+=.3*f(P,y,x,30.,.002,-.01,0.,0.,.1+.06*f(.25*g));"
       "b=i(.8*b);"
     "}"
   "if(r==16)"
     "{"
       "n*=e(m,k-v,1.5,2.,.2,.8);"
       "n*=.5;"
       "float x=100.,o=200.+100.*e(m,k-v,1.5,2.5,.2,10.);"
       "b=.9*f(P,y,o,x,.01,.016,0.,0.);"
       "b=.4*(.5*s(P*y+.1+.1*f(2.*P))+s(P*y+.25)+s(P*y+.2*f(.5*P)));"
     "}"
   "if(r==88)"
     "{"
       "n*=e(m,k-v,.1,2.,.8,0.);"
       "float x=50.,o=80.+250.*e(m,k-v,.2,.3,.5,0.);"
       "b=f(P,y,o,x,.01,.016,3.,50.);"
       "b+=.4*p(s(P*.505*y,2048.),.1+.05*f(.25*I));"
     "}"
   "if(r==81)"
     "{"
       "n*=e(m,k-v,.01,0.,1.,0.);"
       "float x=120.,o=900.+6.*sqrt(y);"
       "b=.4*(.5*s(P*y+.1+.1*f(2.*P))+s(P*y+.24+.01*f(4.*m))+s(P*y+.2*f(.5*P)));"
     "}"
   "if(r==17)"
     "{"
       "n*=e(I,1.,.1,.5,.9,.01);"
       "float x=20.,o=200.+100.*e(m,k-v,1.5,2.5,.2,10.);"
       "b=.6*f(P,y,o,x,.01,.02,0.,3.);"
       "b+=.3*f(P,1.98*y,1.3*o,x,.01,.02,0.,1.);"
     "}"
   "if(r==10)"
     "b=t(2.*y*P)+t(1.998*y*g*(1.+.0001*f(4.*g))),b+=.2*s(5.01*y*P)+.2*s(14.01*y*P),b+=s(P*(y+1000.*smoothstep(-.1,0.,-m)))*smoothstep(-.1,0.,-m),b*=.2;"
   "if(r==20)"
     "b=e(P,w(a),1024.,16,.2,8.+20.*smoothstep(0.,.3,I),1.2,.2,.1)+e(P,2.*w(a),1024.,16,.4,8.+20.*smoothstep(0.,.1,I),1.2,.2,.1),b=.8*b*exp(-4.*m),b+=.4*f(g*y)*exp(-2.*m),b+=.4*t(g*4.*y)*exp(-8.*m),b+=.6*smoothstep(0.,1.2,I)*(.5*p(g*y,0.)+.5*p(g*y*.99,.01));"
   "else"
     " if(r==22)"
       "{"
         "float x=1.4,o=1.3;"
         "n*=exp(-x*(D-v));"
         "float l=1.+.02*exp(-10.*(D-v));"
         "l=1.;"
         "b=.7*p(l*w(a)*P,-.4-.15*f(.3*(D-v)));"
         "b+=.5*f(w(a)*P,.05*f(.25*P));"
         "b=e(P,w(a),1024.,16,.2,8.+20.*smoothstep(0.,.3,I),1.2,.2,.1)+e(P,2.*w(a),1024.,16,.4,8.+20.*smoothstep(0.,.1,I),1.2,.2,.1);"
         "float u=2.+.5*f(.21*g),h=f(4.*y*g+u*f(.25*y*I));"
       "}"
     "else"
       " if(r==21)"
         "{"
           "float x=1.4,o=1.3;"
           "n*=exp(-x*(D-v));"
           "float l=1.+.02*exp(-10.*(D-v));"
           "l=1.;"
           "b=.7*p(l*w(a)*P,-.4-.15*f(.3*(D-v)));"
           "b+=.5*f(w(a)*P,.05*f(.25*P));"
         "}"
       "else"
         " if(r==13)"
           "{"
             "float x=2.+.5*f(.21*g),o=f(4.*y*g+x*f(.25*y*I));"
             "b=o;"
           "}"
         "else"
           " if(r==4)"
             "n=exp(-6.*I)*(1.+.5*f(.25+8.*I)),b=e(P,w(a),2048.,20,.2,3.+5.*smoothstep(0.,.3,I),1.2,.2,.1)+e(P,2.*w(a),1024.,10,.4,1.+3.*smoothstep(0.,.3,I),1.2,.2,.1),b*=.3;"
           "else"
             " if(r==1)"
               "{"
                 "float x=1.3;"
                 "n=smoothstep(0.,.25,D-v)*(1.+.01*sin(2.*PI*20.*P))*e(k-D);"
                 "b=.3*(clamp(x*f(w(a)*P),-.999,.999)+clamp(x*f(.999*w(a)*P+.05),-.999,.999));"
                 "b+=.7*f(w(a)*P,.05);"
               "}"
             "else"
               " if(r==31)"
                 "n*=exp(-2.7*I),b=p(P*y,.1+.02*f(4.*I));"
               "else"
                 " if(r==82)"
                   "{"
                     "float x=.33*y,o=.3*e(g,1.,5.,.01),l=.02*e(g,2.,8.,0.);"
                     "b=f(g*y*(1.+o*f(g*x*(1.+l*f(g*x)))));"
                     "b=f(b,16.,.0625);"
                     "n*=e(m,k-v,.01,2.,.8,0.);"
                     "float u=50.,h=100.+2.*sqrt(y)+300.*e(m,k-v,.5,.3,1.,.005);"
                     "b+=f(P,y,h,u,-.01,.003,3.,50.,2.);"
                     "b+=f(g*y*.49);"
                   "}"
                 "else"
                   " if(r==83)"
                     "{"
                       "float x=.33*y,o=.3*e(g,1.,5.,.01),l=.02*e(g,2.,8.,0.);"
                       "b=f(g*y*(1.+o*f(g*x*(1.+l*f(g*x)))));"
                       "b=f(b,16.,.0625);"
                       "n*=e(m,k-v,.01,2.,.8,0.);"
                       "float u=50.,h=80.+250.*e(m,k-v,.5,.3,1.,.005);"
                       "b+=f(P,y,h,u,.01,.016,3.,50.);"
                       "b+=f(g*y*.5);"
                     "}"
                   "else"
                     " if(r==3)"
                       "{"
                         "float x=1.4;"
                         "n*=exp(-x*(D-v));"
                         "b=f(P*w(a),.001)+t(P*2.*w(a)*(1.+.0001*f(.5*I)))*smoothstep(0.,.3,m);"
                         "float o=.005*smoothstep(0.,1.,g)*t(g);"
                         "b=s(g*w(a)*(1.+o)+.3*smoothstep(0.,.7,g)*s(g*3.01*w(a)));"
                         "float l=.998,h=.5,u=.5,d=1.,O=.1,U=.6,L=s(g*l*(w(a)+O*s(g*l*w(a)))),E=d*s(g*h*w(a)+u*L+U*f(g*h*w(a)));"
                         "b=E;"
                       "}"
   "return clamp(n,0.,1.)*clamp(b,-1.,1.);"
 "}"
 "float D(float P)"
 "{"
   "int b=9,v[10]=int[10](0,232,241,253,350,375,555,704,979,1036),k[1036]=int[1036](56,56,55,53,44,56,60,55,56,55,52,44,56,55,60,53,56,56,55,52,44,56,60,55,56,55,52,44,56,55,60,53,56,56,55,52,44,56,60,55,56,55,52,44,56,55,60,53,56,56,55,52,44,56,60,55,56,55,52,44,56,55,60,53,56,56,55,52,44,56,60,55,56,55,52,44,56,55,60,53,56,56,55,52,44,56,60,55,56,55,52,44,56,55,60,53,56,56,55,52,44,56,60,55,56,55,52,44,56,55,60,53,56,56,55,52,44,56,60,55,56,55,52,44,56,55,60,53,56,56,55,52,44,56,60,55,56,55,52,44,56,55,60,53,56,56,55,52,44,56,60,55,56,55,52,44,56,55,60,53,56,56,55,52,44,56,60,55,56,55,52,44,56,55,60,53,56,56,55,52,44,56,60,55,41,44,48,49,53,60,55,49,48,49,53,56,60,61,67,73,56,55,52,44,56,55,60,53,56,56,55,52,44,56,60,55,56,55,52,44,56,55,60,53,56,56,55,52,44,56,60,55,43,36,46,41,43,36,46,39,41,52,53,51,50,52,53,55,56,60,62,63,65,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,72,77,72,71,66,72,70,71,65,61,60,65,60,59,54,72,70,71,65,61,60,65,60,59,54,24,24,24,24,24,24,24,24,24,25,25,25,25,28,28,28,28,24,24,24,24,24,24,24,24,25,25,25,25,20,20,20,24,24,24,24,24,24,24,24,24,25,25,25,25,28,28,28,28,24,24,24,24,24,24,24,24,25,25,25,25,20,20,20,17,17,17,17,17,17,17,19,19,19,19,13,13,13,17,17,17,17,20,24,31,25,13,13,13,16,16,16,16,17,17,17,17,17,17,17,19,19,19,19,13,13,13,17,17,17,17,20,24,31,25,13,13,13,16,16,16,16,17,17,17,17,20,24,31,25,19,24,31,36,29,13,17,20,24,25,29,36,31,25,13,13,13,13,16,16,16,17,17,17,17,17,17,17,19,19,19,19,13,13,13,17,17,17,17,20,24,31,25,13,13,13,16,16,16,16,24,24,24,24,20,20,20,20,27,27,27,27,22,22,17,17,24,24,24,24,20,20,20,20,27,27,27,27,22,22,17,17,17,17,17,17,17,17,17,19,19,19,19,13,13,13,17,17,17,17,20,20,20,13,13,13,13,16,16,16,16,17,17,17,17,17,17,17,19,19,19,19,13,13,13,17,17,17,17,20,20,20,13,13,13,13,16,16,16,16,17,17,17,17,20,20,20,13,19,24,19,24,17,13,17,20,24,25,17,24,19,13,13,13,13,13,16,16,16,17,17,17,17,17,17,17,19,19,19,19,13,13,13,17,17,17,17,20,20,20,13,13,13,13,16,16,16,16,16,6,6,6,6,6,6,6,6,6,8,8,9,7,6,7,8,6,6,8,8,9,7,8,8,9,6,8,8,9,7,6,7,8,6,6,8,8,9,7,8,8,9,6,8,8,9,7,6,7,8,6,6,8,8,9,7,8,8,9,6,8,8,9,7,6,7,8,6,6,8,8,9,7,8,7,7,7,7,7,6,9,9,6,9,9,6,9,9,6,9,7,6,9,6,9,6,9,9,6,9,6,9,6,9,6,9,9,6,9,9,6,9,9,6,9,7,6,9,9,6,9,9,6,9,9,6,9,9,6,9,9,6,9,9,6,9,9,6,9,7,6,9,6,9,6,9,9,6,9,6,9,6,9,6,9,9,6,9,9,6,9,9,6,9,7,6,9,9,6,9,9,6,9,9,6,9,9,6,9,9,6,9,9,6,9,9,6,9,7,6,9,6,9,6,9,9,6,9,6,9,6,9,6,9,9,6,9,9,6,9,9,6,9,7,6,9,9,6,9,9,6,9,9,6,9,9,6,9,9,6,9,9,6,9,9,6,9,7,6,9,6,9,6,9,9,6,9,6,9,6,9,6,9,9,6,9,9,6,9,9,6,9,7,6,9,9,6,9,9,6,9,9,6,9,9,7,7,6,7,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7);"
   "float s[1036]=float[1036](14.,14.25,14.5,14.75,15.,15.25,15.5,15.75,16.,16.25,16.5,16.75,17.,17.25,17.5,17.75,18.,18.25,18.5,18.75,19.,19.25,19.5,19.75,20.,20.25,20.5,20.75,21.,21.25,21.5,21.75,22.,22.25,22.5,22.75,23.,23.25,23.5,23.75,24.,24.25,24.5,24.75,25.,25.25,25.5,25.75,26.,26.25,26.5,26.75,27.,27.25,27.5,27.75,28.,28.25,28.5,28.75,29.,29.25,29.5,29.75,30.,30.25,30.5,30.75,31.,31.25,31.5,31.75,32.,32.25,32.5,32.75,33.,33.25,33.5,33.75,34.,34.25,34.5,34.75,35.,35.25,35.5,35.75,36.,36.25,36.5,36.75,37.,37.25,37.5,37.75,38.,38.25,38.5,38.75,39.,39.25,39.5,39.75,40.,40.25,40.5,40.75,41.,41.25,41.5,41.75,42.,42.25,42.5,42.75,43.,43.25,43.5,43.75,44.,44.25,44.5,44.75,45.,45.25,45.5,45.75,46.,46.25,46.5,46.75,47.,47.25,47.5,47.75,48.,48.25,48.5,48.75,49.,49.25,49.5,49.75,50.,50.25,50.5,50.75,51.,51.25,51.5,51.75,52.,52.25,52.5,52.75,53.,53.25,53.5,53.75,54.,54.25,54.5,54.75,55.,55.25,55.5,55.75,56.,56.25,56.5,56.75,57.,57.25,57.5,57.75,58.,58.25,58.5,58.75,59.,59.25,59.5,59.75,60.,60.25,60.5,60.75,61.,61.25,61.5,61.75,62.,62.25,62.5,62.75,63.,63.25,63.5,63.75,64.,64.25,64.5,64.75,65.,65.25,65.5,65.75,66.,66.25,66.5,66.75,67.,67.25,67.5,67.75,68.,68.25,68.5,68.75,69.,69.25,69.5,69.75,70.,70.25,70.5,70.75,71.,71.25,71.5,71.75,.125,2.125,4.125,7.,8.125,10.125,12.125,14.,15.,.25,3.,4.,6.125,8.125,9.,10.,11.,12.,13.,14.,15.,0.,.25,.375,.5,.75,.875,1.,1.25,1.375,1.5,1.75,1.875,2.,2.25,2.375,2.5,2.75,2.875,3.,3.25,3.375,3.5,3.75,3.875,4.,4.25,4.375,4.5,4.75,4.875,5.,5.25,5.375,5.5,5.75,5.875,6.,6.25,6.375,6.5,6.75,6.875,7.,7.25,7.375,7.5,7.75,7.875,8.,8.25,8.375,8.5,8.75,8.875,9.,9.25,9.375,9.5,9.75,9.875,10.,10.25,10.375,10.5,10.75,10.875,11.,11.25,11.375,11.5,11.75,11.875,12.,12.25,12.375,12.5,12.75,12.875,13.,13.25,13.375,13.5,13.75,13.875,14.,14.25,14.375,14.5,14.75,14.875,15.,15.25,15.375,15.5,15.75,15.875,16.,16.,17.5,20.5,22.,23.,40.,41.5,44.5,46.,47.5,48.,49.5,52.5,54.,55.,56.,57.5,60.5,62.,63.5,64.,65.5,68.5,70.,71.,24.,24.25,24.5,24.75,25.,25.25,25.5,25.75,26.,26.25,26.5,26.75,27.,27.25,27.5,27.75,28.,28.25,28.5,28.75,29.,29.25,29.5,29.75,30.,30.25,30.5,30.75,31.,31.25,31.5,31.75,32.,32.25,32.5,32.75,33.,33.25,33.5,33.75,34.,34.25,34.5,34.75,35.,35.25,35.5,35.75,36.,36.25,36.5,36.75,37.,37.25,37.5,37.75,38.,38.25,38.5,38.75,39.,39.25,39.5,39.75,40.,40.25,40.5,40.75,41.,41.25,41.5,42.25,42.5,42.75,43.,43.25,43.5,43.75,44.,44.25,44.5,44.75,45.,45.25,45.5,45.75,46.25,46.5,46.75,47.,47.25,47.5,47.75,48.,48.25,48.5,48.75,49.,49.25,49.5,50.25,50.5,50.75,51.,51.25,51.5,51.75,52.,52.25,52.5,52.75,53.,53.25,53.5,53.75,54.25,54.5,54.75,55.,55.25,55.5,55.75,56.,56.25,56.5,56.75,57.,57.25,57.5,57.75,58.25,58.5,58.75,59.,59.25,59.75,60.,60.25,60.5,60.75,61.,61.25,61.5,61.75,62.25,62.5,62.75,63.,63.25,63.5,63.75,64.,64.25,64.5,64.75,65.,65.25,65.5,66.25,66.5,66.75,67.,67.25,67.5,67.75,68.,68.25,68.5,68.75,69.,69.25,69.5,69.75,70.25,70.5,70.75,71.,71.25,71.5,71.75,0.,.5,1.,1.5,2.,2.5,3.,3.5,4.,4.5,5.,5.5,6.,6.5,7.,7.5,8.,8.5,9.,9.5,10.,10.5,11.,11.5,12.,12.5,13.,13.5,14.,14.5,15.,15.5,40.,40.25,40.5,40.75,41.,41.25,41.5,42.25,42.5,42.75,43.,43.25,43.5,43.75,44.,44.25,44.5,44.75,45.,45.25,45.5,45.75,46.25,46.5,46.75,47.,47.25,47.5,47.75,48.,48.25,48.5,48.75,49.,49.25,49.5,50.25,50.5,50.75,51.,51.25,51.5,51.75,52.,52.25,52.5,52.75,53.,53.25,53.5,53.75,54.25,54.5,54.75,55.,55.25,55.5,55.75,56.,56.25,56.5,56.75,57.,57.25,57.5,57.75,58.25,58.5,58.75,59.,59.25,59.75,60.,60.25,60.5,60.75,61.,61.25,61.5,61.75,62.25,62.5,62.75,63.,63.25,63.5,63.75,64.,64.25,64.5,64.75,65.,65.25,65.5,66.25,66.5,66.75,67.,67.25,67.5,67.75,68.,68.25,68.5,68.75,69.,69.25,69.5,69.75,70.25,70.5,70.75,71.,71.25,71.5,71.75,72.,16.,17.,18.,19.,20.,21.,22.,23.,24.,24.25,24.75,24.875,25.,25.25,25.5,25.75,26.,26.25,26.5,26.75,26.875,27.,27.25,27.75,27.875,28.,28.25,28.75,28.875,29.,29.25,29.5,29.75,30.,30.25,30.5,30.75,30.875,31.,31.25,31.75,31.875,32.,32.25,32.75,32.875,33.,33.25,33.5,33.75,34.,34.25,34.5,34.75,34.875,35.,35.25,35.75,35.875,36.,36.25,36.75,36.875,37.,37.25,37.5,37.75,38.,38.25,38.5,38.75,38.875,39.,39.25,39.375,39.5,39.625,39.75,39.875,40.,40.125,40.375,40.5,40.625,40.875,41.,41.125,41.375,41.5,41.625,41.75,42.25,42.375,42.5,42.625,42.75,42.875,43.125,43.25,43.375,43.5,43.625,43.75,43.875,44.,44.125,44.375,44.5,44.625,44.875,45.,45.125,45.375,45.5,45.625,45.75,46.,46.125,46.375,46.5,46.625,46.875,47.,47.125,47.375,47.5,47.625,47.875,48.,48.125,48.375,48.5,48.625,48.875,49.,49.125,49.375,49.5,49.625,49.75,50.25,50.375,50.5,50.625,50.75,50.875,51.125,51.25,51.375,51.5,51.625,51.75,51.875,52.,52.125,52.375,52.5,52.625,52.875,53.,53.125,53.375,53.5,53.625,53.75,54.,54.125,54.375,54.5,54.625,54.875,55.,55.125,55.375,55.5,55.625,55.875,56.,56.125,56.375,56.5,56.625,56.875,57.,57.125,57.375,57.5,57.625,57.75,58.25,58.375,58.5,58.625,58.75,58.875,59.125,59.25,59.375,59.5,59.625,59.75,59.875,60.,60.125,60.375,60.5,60.625,60.875,61.,61.125,61.375,61.5,61.625,61.75,62.,62.125,62.375,62.5,62.625,62.875,63.,63.125,63.375,63.5,63.625,63.875,64.,64.125,64.375,64.5,64.625,64.875,65.,65.125,65.375,65.5,65.625,65.75,66.25,66.375,66.5,66.625,66.75,66.875,67.125,67.25,67.375,67.5,67.625,67.75,67.875,68.,68.125,68.375,68.5,68.625,68.875,69.,69.125,69.375,69.5,69.625,69.75,70.,70.125,70.375,70.5,70.625,70.875,71.,71.125,71.375,71.5,71.625,71.875,22.,22.5,22.75,23.,23.125,23.25,23.375,23.5,23.625,23.75,23.875,40.5,42.875,43.,43.75,44.5,46.5,47.25,47.375,47.5,47.625,47.75,47.875,48.5,50.875,51.,51.75,52.5,54.5,55.25,55.375,55.5,55.625,55.75,55.875,56.5,58.875,59.,59.75,60.5,62.5,63.25,63.375,63.5,63.625,63.75,64.5,66.875,67.,67.75,68.5,70.5,71.25,71.375,71.5,71.625,71.75),o[1036]=float[1036](14.125,14.375,14.625,14.875,15.125,15.375,15.625,15.875,16.125,16.375,16.625,16.875,17.125,17.375,17.625,17.875,18.125,18.375,18.625,18.875,19.125,19.375,19.625,19.875,20.125,20.375,20.625,20.875,21.125,21.375,21.625,21.875,22.125,22.375,22.625,22.875,23.125,23.375,23.625,23.875,24.125,24.375,24.625,24.875,25.125,25.375,25.625,25.875,26.125,26.375,26.625,26.875,27.125,27.375,27.625,27.875,28.125,28.375,28.625,28.875,29.125,29.375,29.625,29.875,30.125,30.375,30.625,30.875,31.125,31.375,31.625,31.875,32.125,32.375,32.625,32.875,33.125,33.375,33.625,33.875,34.125,34.375,34.625,34.875,35.125,35.375,35.625,35.875,36.125,36.375,36.625,36.875,37.125,37.375,37.625,37.875,38.125,38.375,38.625,38.875,39.125,39.375,39.625,39.875,40.125,40.375,40.625,40.875,41.125,41.375,41.625,41.875,42.125,42.375,42.625,42.875,43.125,43.375,43.625,43.875,44.125,44.375,44.625,44.875,45.125,45.375,45.625,45.875,46.125,46.375,46.625,46.875,47.125,47.375,47.625,47.875,48.125,48.375,48.625,48.875,49.125,49.375,49.625,49.875,50.125,50.375,50.625,50.875,51.125,51.375,51.625,51.875,52.125,52.375,52.625,52.875,53.125,53.375,53.625,53.875,54.125,54.375,54.625,54.875,55.125,55.375,55.625,55.875,56.125,56.375,56.625,56.875,57.125,57.375,57.625,57.875,58.125,58.375,58.625,58.875,59.125,59.375,59.625,59.875,60.25,60.5,60.75,61.,61.25,61.5,61.75,62.,62.25,62.5,62.75,63.,63.25,63.5,63.75,64.,64.125,64.375,64.625,64.875,65.125,65.375,65.625,65.875,66.125,66.375,66.625,66.875,67.125,67.375,67.625,67.875,68.125,68.375,68.625,68.875,69.125,69.375,69.625,69.875,70.125,70.375,70.625,70.875,71.125,71.375,71.625,71.875,2.,4.,6.,8.,10.,12.,14.,15.,16.,2.,4.,5.875,8.,9.,9.75,10.875,12.,13.,14.,15.,16.,.125,.375,.5,.625,.875,1.,1.125,1.375,1.5,1.625,1.875,2.,2.125,2.375,2.5,2.625,2.875,3.,3.125,3.375,3.5,3.625,3.875,4.,4.125,4.375,4.5,4.625,4.875,5.,5.125,5.375,5.5,5.625,5.875,6.,6.125,6.375,6.5,6.625,6.875,7.,7.125,7.375,7.5,7.625,7.875,8.,8.125,8.375,8.5,8.625,8.875,9.,9.125,9.375,9.5,9.625,9.875,10.,10.125,10.375,10.5,10.625,10.875,11.,11.125,11.375,11.5,11.625,11.875,12.,12.125,12.375,12.5,12.625,12.875,13.,13.125,13.375,13.5,13.625,13.875,14.,14.125,14.375,14.5,14.625,14.875,15.,15.125,15.375,15.5,15.625,15.875,16.,16.125,17.5,19.5,22.,23.,24.,41.5,43.5,46.,47.5,48.,49.5,51.5,54.,55.,56.,57.5,59.5,62.,63.5,64.,65.5,67.5,70.,71.,72.,24.25,24.5,24.75,25.,25.25,25.5,25.75,26.,26.25,26.5,26.75,27.,27.25,27.5,27.75,28.,28.25,28.5,28.75,29.,29.25,29.5,29.75,30.,30.25,30.5,30.75,31.,31.25,31.5,31.75,32.,32.25,32.5,32.75,33.,33.25,33.5,33.75,34.,34.25,34.5,34.75,35.,35.25,35.5,35.75,36.,36.25,36.5,36.75,37.,37.25,37.5,37.75,38.,38.25,38.5,38.75,39.,39.25,39.5,39.75,40.,40.25,40.5,40.75,41.,41.25,41.5,41.75,42.5,42.75,43.,43.25,43.5,43.75,44.,44.25,44.5,44.75,45.,45.25,45.5,45.75,46.,46.5,46.75,47.,47.25,47.5,47.75,48.,48.25,48.5,48.75,49.,49.25,49.5,49.75,50.5,50.75,51.,51.25,51.5,51.75,52.,52.25,52.5,52.75,53.,53.25,53.5,53.75,54.,54.5,54.75,55.,55.25,55.5,55.75,56.,56.25,56.5,56.75,57.,57.25,57.5,57.75,58.,58.5,58.75,59.,59.25,59.5,60.,60.25,60.5,60.75,61.,61.25,61.5,61.75,62.,62.5,62.75,63.,63.25,63.5,63.75,64.,64.25,64.5,64.75,65.,65.25,65.5,65.75,66.5,66.75,67.,67.25,67.5,67.75,68.,68.25,68.5,68.75,69.,69.25,69.5,69.75,70.,70.5,70.75,71.,71.25,71.5,71.75,72.,.5,1.,1.5,2.,2.5,3.,3.5,4.,4.5,5.,5.5,6.,6.5,7.,7.5,8.,8.5,9.,9.5,10.,10.5,11.,11.5,12.,12.5,13.,13.5,14.,14.5,15.,15.5,16.,40.25,40.5,40.75,41.,41.25,41.5,41.75,42.5,42.75,43.,43.25,43.5,43.75,44.,44.25,44.5,44.75,45.,45.25,45.5,45.75,46.,46.5,46.75,47.,47.25,47.5,47.75,48.,48.25,48.5,48.75,49.,49.25,49.5,49.75,50.5,50.75,51.,51.25,51.5,51.75,52.,52.25,52.5,52.75,53.,53.25,53.5,53.75,54.,54.5,54.75,55.,55.25,55.5,55.75,56.,56.25,56.5,56.75,57.,57.25,57.5,57.75,58.,58.5,58.75,59.,59.25,59.5,60.,60.25,60.5,60.75,61.,61.25,61.5,61.75,62.,62.5,62.75,63.,63.25,63.5,63.75,64.,64.25,64.5,64.75,65.,65.25,65.5,65.75,66.5,66.75,67.,67.25,67.5,67.75,68.,68.25,68.5,68.75,69.,69.25,69.5,69.75,70.,70.5,70.75,71.,71.25,71.5,71.75,72.,72.25,16.5,17.5,18.5,19.5,20.5,21.5,22.5,23.5,24.25,24.5,24.875,25.,25.25,25.5,25.75,26.,26.25,26.5,26.75,26.875,27.,27.25,27.5,27.875,28.,28.25,28.5,28.875,29.,29.25,29.5,29.75,30.,30.25,30.5,30.75,30.875,31.,31.25,31.5,31.875,32.,32.25,32.5,32.875,33.,33.25,33.5,33.75,34.,34.25,34.5,34.75,34.875,35.,35.25,35.5,35.875,36.,36.25,36.5,36.875,37.,37.25,37.5,37.75,38.,38.25,38.5,38.75,38.875,39.,39.25,39.375,39.5,39.625,39.75,39.875,40.,40.125,40.25,40.5,40.625,40.75,41.,41.125,41.25,41.5,41.625,41.75,41.875,42.375,42.5,42.625,42.75,42.875,43.,43.25,43.375,43.5,43.625,43.75,43.875,44.,44.125,44.25,44.5,44.625,44.75,45.,45.125,45.25,45.5,45.625,45.75,45.875,46.125,46.25,46.5,46.625,46.75,47.,47.125,47.25,47.5,47.625,47.75,48.,48.125,48.25,48.5,48.625,48.75,49.,49.125,49.25,49.5,49.625,49.75,49.875,50.375,50.5,50.625,50.75,50.875,51.,51.25,51.375,51.5,51.625,51.75,51.875,52.,52.125,52.25,52.5,52.625,52.75,53.,53.125,53.25,53.5,53.625,53.75,53.875,54.125,54.25,54.5,54.625,54.75,55.,55.125,55.25,55.5,55.625,55.75,56.,56.125,56.25,56.5,56.625,56.75,57.,57.125,57.25,57.5,57.625,57.75,57.875,58.375,58.5,58.625,58.75,58.875,59.,59.25,59.375,59.5,59.625,59.75,59.875,60.,60.125,60.25,60.5,60.625,60.75,61.,61.125,61.25,61.5,61.625,61.75,61.875,62.125,62.25,62.5,62.625,62.75,63.,63.125,63.25,63.5,63.625,63.75,64.,64.125,64.25,64.5,64.625,64.75,65.,65.125,65.25,65.5,65.625,65.75,65.875,66.375,66.5,66.625,66.75,66.875,67.,67.25,67.375,67.5,67.625,67.75,67.875,68.,68.125,68.25,68.5,68.625,68.75,69.,69.125,69.25,69.5,69.625,69.75,69.875,70.125,70.25,70.5,70.625,70.75,71.,71.125,71.25,71.5,71.625,71.75,72.,22.25,22.75,23.,23.125,23.25,23.375,23.5,23.625,23.75,23.875,24.,40.625,43.,43.125,43.875,44.625,46.625,47.375,47.5,47.625,47.75,47.875,48.,48.625,51.,51.125,51.875,52.625,54.625,55.375,55.5,55.625,55.75,55.875,56.,56.625,59.,59.125,59.875,60.625,62.625,63.375,63.5,63.625,63.75,63.875,64.625,67.,67.125,67.875,68.625,70.625,71.375,71.5,71.625,71.75,71.875);"
   "int t[9]=int[9](4,3,3,9,3,82,20,6,7);"
   "float D[9]=float[9](1.,.8,.8,1.,1.,1.,1.,1.,1.);"
   "int w[9]=int[9](0,0,0,0,-1,0,-1,0,0);"
   "float x=.4,a=72.;"
   "int l=5,m=11;"
   "float y=0.,g=0.,h=mod(I*P,a);"
   "if(h>a)"
     "return y;"
   "float u=.3,d=1.,O=.99,U=.6,L=-1.,E=-1.;"
   "int B=-1,K=-1;"
   "for(int Y=0;Y<b;Y++)"
     "{"
       "if(DEBUG_ONLY_TRACK>=0&&Y!=DEBUG_ONLY_TRACK)"
         "continue;"
       "if(h<s[v[Y]+0])"
         "continue;"
       "if(h>o[v[Y+1]-1])"
         "continue;"
       "float S=1.;"
       "int R=v[Y+1]-v[Y],N=R-1;"
       "for(int G=0;G<R-1;G++)"
         "if(h<s[v[Y]+G+1])"
           "{"
             "N=G;"
             "break;"
           "}"
       "int G=R-1;"
       "for(int C=0;C<R-1;C++)"
         "if(h<=o[v[Y]+C]+float(C>2)*float(Y==0)*S)"
           "{"
             "G=C;"
             "break;"
           "}"
       "for(int C=G;C<=N;C++)"
         "{"
           "L=s[v[Y]+C];"
           "E=o[v[Y]+C]+float(Y==0)*S;"
           "B=k[v[Y]+C];"
           "K=t[Y];"
           "if(K<l||K>m)"
             "y+=D[Y]*f(P,h,L,E,B+12*w[Y],K);"
           "else"
             "{"
               "K=B;"
               "float M=0.,q=1.-exp(-1000.*(h-L));"
               "if(K==6)"
                 "M=n(h*c,L*c,80,K)*e(E-h),d=q-O*e(h-L)*smoothstep(-U,0.,L-h);"
               "else"
                 " if(K==5)"
                   "d=q-O*e(h-L)*smoothstep(-U,0.,L-h);"
                 "else"
                   " if(K==7)"
                     "M=i(h*c,L*c,100,K);"
                   "else"
                     " if(K==8)"
                       "M=p(h*c,L*c,100,K);"
                     "else"
                       " if(K==9)"
                         "M=r(h*c,L*c,100,K);"
               "g+=D[Y]*M;"
             "}"
         "}"
     "}"
   "g*=x;"
   "y*=x;"
   "if(DEBUG_ONLY_DRUMS)"
     "return.99*clamp(g,-1.,1.);"
   "if(DEBUG_ONLY_MELO)"
     "return.99*clamp(y,-1.,1.);"
   "d=1.;"
   "u=.5;"
   "float G=clamp((1.-u)*d*y+u*g,-1.,1.);"
   "return G;"
 "}"
 "vec2 P(float f)"
 "{"
   "float r=.1,b=1e-05;"
   "return vec2(tanh(D(f)));"
 "}"
 "void main()"
 "{"
   "float f=iBlockOffset+(gl_FragCoord.x-.5+(gl_FragCoord.y-.5)*512.)/iSampleRate;"
   "vec2 s=iVolume*P(f),i=floor((.5+.5*s)*65536.),r=mod(i,256.)/255.,b=floor(i/256.)/255.;"
   "gl_FragColor=vec4(r.x,b.x,r.y,b.y);"
 "}";

#endif // SFX_H_
